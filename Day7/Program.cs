using Day7;

string input = "$ cd /\r\n$ ls\r\n282959 btm\r\ndir fmfnpm\r\ndir gwlwp\r\ndir hchp\r\n275929 hmbbjbf\r\ndir nsphznf\r\ndir phschqg\r\n193293 rhpwvff\r\ndir spfwthmd\r\ndir wchdqb\r\ndir zlpmfh\r\n191479 zlpmfh.gpt\r\n$ cd fmfnpm\r\n$ ls\r\ndir fgtqvq\r\n194704 fwdvgnqp.fsm\r\n48823 fwdwq.tsq\r\n224991 mtjngt\r\n79386 rdsgpfjb.sfn\r\ndir rvnwwfq\r\ndir wrzcjwc\r\ndir zlpmfh\r\n$ cd fgtqvq\r\n$ ls\r\n293783 rjc.ncl\r\n324635 wdjrhw\r\n$ cd ..\r\n$ cd rvnwwfq\r\n$ ls\r\n76914 btm\r\n$ cd ..\r\n$ cd wrzcjwc\r\n$ ls\r\ndir fwdwq\r\n2159 fzb.tjs\r\ndir lddhdslh\r\ndir mjp\r\n284475 vclnlds\r\n196284 zjtftd\r\n$ cd fwdwq\r\n$ ls\r\n120795 jqnl.hzj\r\n$ cd ..\r\n$ cd lddhdslh\r\n$ ls\r\n293030 fzb\r\ndir gzj\r\n$ cd gzj\r\n$ ls\r\ndir qzgsswr\r\n$ cd qzgsswr\r\n$ ls\r\n33681 qzgsswr.wmv\r\n121649 sbjbw.shv\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd mjp\r\n$ ls\r\n289491 btm\r\n169221 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd zlpmfh\r\n$ ls\r\n189296 ldgpvnh\r\n$ cd ..\r\n$ cd ..\r\n$ cd gwlwp\r\n$ ls\r\ndir dwcrnbj\r\ndir fmfnpm\r\ndir fwdwq\r\ndir hzpsts\r\ndir hzrq\r\ndir jzwpjtf\r\ndir lmmpmghg\r\ndir mnw\r\ndir qzgsswr\r\ndir zlpmfh\r\n$ cd dwcrnbj\r\n$ ls\r\n182989 btm\r\n145822 fwdvgnqp.fsm\r\ndir jbtfslcn\r\ndir lgbglc\r\n293584 mfstl.hhp\r\ndir sbffqq\r\ndir zhvn\r\n$ cd jbtfslcn\r\n$ ls\r\n195255 sbjbw.shv\r\n$ cd ..\r\n$ cd lgbglc\r\n$ ls\r\n261423 fmfnpm.rqh\r\n323530 fzb.lmm\r\n314800 hbl.blm\r\n173052 lwpglgt\r\ndir qdpjss\r\n184808 zlpmfh.chl\r\n$ cd qdpjss\r\n$ ls\r\n83714 djsrhr.vch\r\n68191 lqljcq.sdv\r\n$ cd ..\r\n$ cd ..\r\n$ cd sbffqq\r\n$ ls\r\n29842 fwdvgnqp.fsm\r\n$ cd ..\r\n$ cd zhvn\r\n$ ls\r\ndir clpcg\r\ndir gswvch\r\ndir lgmfhnq\r\n184407 rlvprbs\r\n235779 rnh.dlv\r\n99852 ttjtnj.gjs\r\n$ cd clpcg\r\n$ ls\r\n97780 fwdvgnqp.fsm\r\n201515 rth.rhm\r\n$ cd ..\r\n$ cd gswvch\r\n$ ls\r\ndir fzb\r\ndir mdrlrtl\r\n$ cd fzb\r\n$ ls\r\ndir qzgsswr\r\n$ cd qzgsswr\r\n$ ls\r\n198805 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd mdrlrtl\r\n$ ls\r\n154648 spm.wvf\r\n$ cd ..\r\n$ cd ..\r\n$ cd lgmfhnq\r\n$ ls\r\n303154 mjzw.tbq\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd fmfnpm\r\n$ ls\r\n134756 bdmdfvs.llm\r\n228983 brfrv\r\ndir fzb\r\n52921 mnfsltsj\r\n185748 sbjbw.shv\r\ndir svtswb\r\n$ cd fzb\r\n$ ls\r\ndir fzb\r\n$ cd fzb\r\n$ ls\r\ndir gwtslbr\r\n$ cd gwtslbr\r\n$ ls\r\n224479 fmfnpm.jqh\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd svtswb\r\n$ ls\r\ndir fmfnpm\r\n55122 fmfnpm.fdl\r\ndir msfd\r\n30710 rtfwvd.fch\r\n71950 vnwvdmcm.pbz\r\n$ cd fmfnpm\r\n$ ls\r\n318326 rtv.jgn\r\n$ cd ..\r\n$ cd msfd\r\n$ ls\r\n86195 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd fwdwq\r\n$ ls\r\n203108 fzb\r\n72579 gcjd.nvp\r\ndir hjfpn\r\ndir qbhn\r\ndir qbnfrhdn\r\n310102 wbdhc\r\n248602 wgdmvslc.ffs\r\n140513 znrlqvmb.thj\r\ndir ztf\r\n$ cd hjfpn\r\n$ ls\r\ndir tfdt\r\n$ cd tfdt\r\n$ ls\r\n202865 chvfjrgz.rdm\r\n$ cd ..\r\n$ cd ..\r\n$ cd qbhn\r\n$ ls\r\n34122 fmfnpm\r\n19676 gfbt.nnc\r\ndir hgdgbrw\r\ndir jlztdcl\r\n93203 jqnl.hzj\r\ndir ppcqqtlj\r\n167401 qzgsswr\r\n$ cd hgdgbrw\r\n$ ls\r\n25297 fzb.vlp\r\ndir nbl\r\n$ cd nbl\r\n$ ls\r\ndir czpfqbp\r\ndir fwdwq\r\n$ cd czpfqbp\r\n$ ls\r\n135628 fzb.tqn\r\n$ cd ..\r\n$ cd fwdwq\r\n$ ls\r\n165198 lrgpwnvv\r\n280597 mcmcn\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd jlztdcl\r\n$ ls\r\n188181 bzgzvfjv\r\n116603 fwdvgnqp.fsm\r\ndir fwdwq\r\n277728 fzb\r\n63999 zfrvp.ppd\r\n281623 zgpwjbc.wcj\r\n$ cd fwdwq\r\n$ ls\r\ndir bpt\r\ndir fmrmm\r\ndir fzb\r\ndir qzgsswr\r\n$ cd bpt\r\n$ ls\r\n179418 dhwvhq\r\n313538 njnhmgg\r\n28613 rjc.ncl\r\n267053 sbjbw.shv\r\n$ cd ..\r\n$ cd fmrmm\r\n$ ls\r\n258044 fmfnpm\r\n120035 qcgrnqf.flz\r\n141340 rjc.ncl\r\ndir sps\r\n$ cd sps\r\n$ ls\r\ndir sphjrrvc\r\n$ cd sphjrrvc\r\n$ ls\r\n152609 cwjwbp\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd fzb\r\n$ ls\r\n99140 btm\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\n25030 cjdltcj.wsw\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd ppcqqtlj\r\n$ ls\r\n39010 zcmf.jll\r\n$ cd ..\r\n$ cd ..\r\n$ cd qbnfrhdn\r\n$ ls\r\n282601 cdw.mfn\r\ndir fwdwq\r\n121557 pnqzb.njr\r\n145720 wznfpcn.qhp\r\n$ cd fwdwq\r\n$ ls\r\n152478 fwdvgnqp.fsm\r\ndir fwdwq\r\ndir hhnf\r\n301797 hngcrd.hgt\r\ndir hpj\r\ndir qzgsswr\r\n$ cd fwdwq\r\n$ ls\r\ndir cdb\r\n69663 fmfnpm\r\n97882 fwdvgnqp.fsm\r\n61057 hlg.zhq\r\n115474 rzv.vjv\r\n$ cd cdb\r\n$ ls\r\n193519 djwqhfg.mhl\r\n255813 zptj.cgm\r\n$ cd ..\r\n$ cd ..\r\n$ cd hhnf\r\n$ ls\r\ndir cpzrh\r\n$ cd cpzrh\r\n$ ls\r\n167401 fwdvgnqp.fsm\r\n224559 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd hpj\r\n$ ls\r\ndir spqljpnt\r\n$ cd spqljpnt\r\n$ ls\r\n268253 fjvqzqt.lmz\r\n63824 lfdrvlc.pww\r\n$ cd ..\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\ndir fwdwq\r\ndir hwnmf\r\ndir rbjpbm\r\ndir vhstcbnf\r\ndir zflfcnw\r\n$ cd fwdwq\r\n$ ls\r\n29113 ctr.zjl\r\n130931 jqnl.hzj\r\n111025 zlpmfh\r\n$ cd ..\r\n$ cd hwnmf\r\n$ ls\r\ndir dspbm\r\n260735 fwdwq.qwg\r\n297937 fzb\r\n45087 fzb.drv\r\n19946 jqnl.hzj\r\n51617 nqt.wpr\r\n$ cd dspbm\r\n$ ls\r\n29361 btm\r\ndir fng\r\n127536 lspft.twz\r\n$ cd fng\r\n$ ls\r\n47261 rjc.ncl\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd rbjpbm\r\n$ ls\r\n135665 cgfsvqf\r\ndir dbppcf\r\n259879 fwdvgnqp.fsm\r\n143467 qrssbjm.wbh\r\ndir rgvvmf\r\ndir trtgj\r\n$ cd dbppcf\r\n$ ls\r\n72276 jqnl.hzj\r\n$ cd ..\r\n$ cd rgvvmf\r\n$ ls\r\ndir zhldtfj\r\n$ cd zhldtfj\r\n$ ls\r\n248448 hflnwgj\r\n$ cd ..\r\n$ cd ..\r\n$ cd trtgj\r\n$ ls\r\n94714 flfhzc\r\n137893 qqdrglf.rbp\r\n306051 rggqwl\r\n$ cd ..\r\n$ cd ..\r\n$ cd vhstcbnf\r\n$ ls\r\n142465 btm\r\ndir fcpwqj\r\ndir fzb\r\n310858 jmfsz\r\ndir mjjcsbcn\r\n223040 qfnwth.lwq\r\ndir qjfwzdn\r\ndir qzgsswr\r\n156837 rjc.ncl\r\n244544 tvsfmpc.nhz\r\n$ cd fcpwqj\r\n$ ls\r\n75022 thrdj.vnw\r\n$ cd ..\r\n$ cd fzb\r\n$ ls\r\n206638 rjc.ncl\r\n20614 vnq.sfp\r\n277785 zpfjd.vgr\r\n$ cd ..\r\n$ cd mjjcsbcn\r\n$ ls\r\n22117 cscpb.tpw\r\n$ cd ..\r\n$ cd qjfwzdn\r\n$ ls\r\n124990 qzgsswr.pdw\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\ndir chptwpbh\r\ndir fwdwq\r\n305061 htbcc.dbl\r\n22511 jqnl.hzj\r\n80135 svvdgvsw\r\ndir vqtnpbn\r\n$ cd chptwpbh\r\n$ ls\r\n55085 fdhzfd.vbl\r\n324100 mcbr.jtn\r\n148699 rtlmz.lvp\r\n$ cd ..\r\n$ cd fwdwq\r\n$ ls\r\n321251 qbqjp.cvs\r\n$ cd ..\r\n$ cd vqtnpbn\r\n$ ls\r\n211984 btm\r\n181182 fwdwq.nsg\r\n212415 lnqbtt.fvs\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd zflfcnw\r\n$ ls\r\n183836 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd ztf\r\n$ ls\r\ndir vrj\r\n$ cd vrj\r\n$ ls\r\ndir fmfnpm\r\ndir jqmcczl\r\n$ cd fmfnpm\r\n$ ls\r\n52873 sbjbw.shv\r\n$ cd ..\r\n$ cd jqmcczl\r\n$ ls\r\n153695 sbjbw.shv\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd hzpsts\r\n$ ls\r\ndir dsqsfqv\r\n51518 fmfnpm.bhn\r\ndir fszpc\r\ndir fwdwq\r\ndir vrhcvmn\r\n$ cd dsqsfqv\r\n$ ls\r\n221801 hqjwts\r\n$ cd ..\r\n$ cd fszpc\r\n$ ls\r\ndir lrtsfgg\r\ndir nndsvglm\r\n$ cd lrtsfgg\r\n$ ls\r\n316171 lhl.jwm\r\ndir qhph\r\n193371 zbttt.rmd\r\n$ cd qhph\r\n$ ls\r\n71851 zqswjnp.tnc\r\n$ cd ..\r\n$ cd ..\r\n$ cd nndsvglm\r\n$ ls\r\n5209 ddjgsmsm.rhv\r\ndir qzgsswr\r\n$ cd qzgsswr\r\n$ ls\r\n313591 flmfc.pbn\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd fwdwq\r\n$ ls\r\n134971 fmfnpm.rcs\r\n$ cd ..\r\n$ cd vrhcvmn\r\n$ ls\r\n95237 fzb.zqw\r\n147520 qzgsswr\r\ndir zrnsdljf\r\n$ cd zrnsdljf\r\n$ ls\r\n120643 sbjbw.shv\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd hzrq\r\n$ ls\r\n177154 fwdvgnqp.fsm\r\n127561 fwdwq.hcd\r\ndir vqt\r\n$ cd vqt\r\n$ ls\r\n148546 fwdvgnqp.fsm\r\n108391 rjc.ncl\r\n$ cd ..\r\n$ cd ..\r\n$ cd jzwpjtf\r\n$ ls\r\n46687 fwdwq\r\n$ cd ..\r\n$ cd lmmpmghg\r\n$ ls\r\ndir fwdwq\r\ndir snqlc\r\ndir trtpbbs\r\ndir zlpmfh\r\n$ cd fwdwq\r\n$ ls\r\ndir dzfmw\r\ndir fmfnpm\r\ndir qgdjz\r\ndir qzgsswr\r\n102754 qzgsswr.wns\r\n$ cd dzfmw\r\n$ ls\r\n77275 fmfnpm.qgg\r\ndir fwdwq\r\n$ cd fwdwq\r\n$ ls\r\n132030 fwdvgnqp.fsm\r\n311894 jgvg.lgb\r\ndir mbqw\r\n309968 pwv\r\n185449 qzgsswr.nrz\r\n283317 sbjbw.shv\r\ndir zlpmfh\r\n$ cd mbqw\r\n$ ls\r\n292344 fwdwq.sfb\r\n43979 sbjbw.shv\r\ndir stmb\r\n$ cd stmb\r\n$ ls\r\n164954 fwdwq.gtn\r\n$ cd ..\r\n$ cd ..\r\n$ cd zlpmfh\r\n$ ls\r\n248119 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd fmfnpm\r\n$ ls\r\n306459 wrscv\r\n$ cd ..\r\n$ cd qgdjz\r\n$ ls\r\ndir llb\r\ndir pstmbbv\r\ndir qth\r\ndir qzgsswr\r\ndir rqbmzrh\r\ndir ssqj\r\n$ cd llb\r\n$ ls\r\ndir fmfnpm\r\n8728 rjc.ncl\r\n95783 sbjbw.shv\r\n$ cd fmfnpm\r\n$ ls\r\n266355 ddfzzh\r\n$ cd ..\r\n$ cd ..\r\n$ cd pstmbbv\r\n$ ls\r\n303042 fnj.vsr\r\n$ cd ..\r\n$ cd qth\r\n$ ls\r\n155353 chqshnhb.sdm\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\n155632 zlpmfh.dhp\r\n$ cd ..\r\n$ cd rqbmzrh\r\n$ ls\r\n202692 rjc.ncl\r\n$ cd ..\r\n$ cd ssqj\r\n$ ls\r\ndir gffp\r\n$ cd gffp\r\n$ ls\r\n34212 rjc.ncl\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\n324875 btm\r\n275450 fmfnpm.gdr\r\n190317 hwzgndb\r\n251199 mgdsh.tfd\r\n$ cd ..\r\n$ cd ..\r\n$ cd snqlc\r\n$ ls\r\ndir ztsc\r\n$ cd ztsc\r\n$ ls\r\n169368 jqnl.hzj\r\n$ cd ..\r\n$ cd ..\r\n$ cd trtpbbs\r\n$ ls\r\n216211 hhf.hww\r\n101252 htzmmgd\r\n$ cd ..\r\n$ cd zlpmfh\r\n$ ls\r\n312349 qtgpq.jjf\r\n$ cd ..\r\n$ cd ..\r\n$ cd mnw\r\n$ ls\r\ndir fwdwq\r\ndir vbplht\r\ndir zgrwvc\r\ndir zqlqrjgr\r\n$ cd fwdwq\r\n$ ls\r\ndir cgtmbm\r\ndir dpnhgsf\r\ndir lddgc\r\ndir qzgsswr\r\n29505 vffzmhj.jqc\r\n$ cd cgtmbm\r\n$ ls\r\ndir dcw\r\n132840 fwdvgnqp.fsm\r\ndir fwdwq\r\n143226 hwsqv\r\n160598 sbjbw.shv\r\n$ cd dcw\r\n$ ls\r\ndir mdqq\r\ndir nrg\r\n$ cd mdqq\r\n$ ls\r\n230975 fwdvgnqp.fsm\r\ndir fzb\r\n207419 mdwmrb.nqd\r\ndir pfzsg\r\ndir wvtjplcj\r\n$ cd fzb\r\n$ ls\r\n116263 fmfnpm\r\n$ cd ..\r\n$ cd pfzsg\r\n$ ls\r\n211092 chp.lwg\r\n149800 fbffjpz\r\n124128 nqvdq.hhl\r\n$ cd ..\r\n$ cd wvtjplcj\r\n$ ls\r\n82449 lcchd.gsl\r\n$ cd ..\r\n$ cd ..\r\n$ cd nrg\r\n$ ls\r\n32393 fwdvgnqp.fsm\r\n$ cd ..\r\n$ cd ..\r\n$ cd fwdwq\r\n$ ls\r\n63350 zlpmfh.jql\r\n$ cd ..\r\n$ cd ..\r\n$ cd dpnhgsf\r\n$ ls\r\n89773 mchpsf.cwl\r\n$ cd ..\r\n$ cd lddgc\r\n$ ls\r\n56273 cwdjlw\r\n261919 fzb.qbr\r\n49151 vtjc.qqq\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\n288467 jqnl.hzj\r\n283162 tfsnpt.cpr\r\n$ cd ..\r\n$ cd ..\r\n$ cd vbplht\r\n$ ls\r\n115696 mfwsbzzm.stf\r\n149951 mnwj.jdn\r\n222362 vtpzr.nnj\r\ndir zlpmfh\r\n$ cd zlpmfh\r\n$ ls\r\ndir dqszzbs\r\n293533 fmfnpm.msw\r\n184810 jsfqrptb.dcl\r\n224988 whmgv\r\n$ cd dqszzbs\r\n$ ls\r\n140899 btm\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd zgrwvc\r\n$ ls\r\ndir prmrv\r\n182098 qsljdzsj\r\n16089 rjc.ncl\r\n24028 tpq.dhd\r\n$ cd prmrv\r\n$ ls\r\n261147 rjc.ncl\r\n285206 zlpmfh.hcz\r\n$ cd ..\r\n$ cd ..\r\n$ cd zqlqrjgr\r\n$ ls\r\ndir cjmhdr\r\n16259 sbjbw.shv\r\n$ cd cjmhdr\r\n$ ls\r\n43212 fmfnpm\r\n36273 jqnl.hzj\r\n66482 jtm.hmj\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd qzgsswr\r\n$ ls\r\n154596 frglht.mvr\r\ndir fwdwq\r\ndir fzb\r\n150820 rjc.ncl\r\n$ cd fwdwq\r\n$ ls\r\ndir gmthth\r\n121228 mfsmjhr\r\ndir njm\r\ndir tslpnb\r\n$ cd gmthth\r\n$ ls\r\n315665 fzb.gwc\r\n291878 qzgsswr.gss\r\n105707 rjc.ncl\r\n$ cd ..\r\n$ cd njm\r\n$ ls\r\n49199 fwdvgnqp.fsm\r\n17669 jqnl.hzj\r\n$ cd ..\r\n$ cd tslpnb\r\n$ ls\r\n268158 fwdwq\r\n$ cd ..\r\n$ cd ..\r\n$ cd fzb\r\n$ ls\r\n270392 jqnl.hzj\r\n38464 rwfjhg.rqt\r\n19087 wcqmpcrf.tzp\r\n5009 zlpmfh.mmq\r\n$ cd ..\r\n$ cd ..\r\n$ cd zlpmfh\r\n$ ls\r\ndir dfgz\r\ndir fmfnpm\r\n58493 sbjbw.shv\r\ndir tvzqcg\r\n12981 zlpmfh.ggc\r\n$ cd dfgz\r\n$ ls\r\ndir ncrggngr\r\n202192 qdnfl.pvt\r\n$ cd ncrggngr\r\n$ ls\r\ndir fwdwq\r\n$ cd fwdwq\r\n$ ls\r\n246049 btm\r\n123758 vfw\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd fmfnpm\r\n$ ls\r\n90482 fwdwq\r\n$ cd ..\r\n$ cd tvzqcg\r\n$ ls\r\n37360 btm\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd hchp\r\n$ ls\r\ndir jlcsc\r\n191408 jqnl.hzj\r\ndir lvws\r\ndir zlpmfh\r\ndir zvb\r\n$ cd jlcsc\r\n$ ls\r\ndir pqdwdtm\r\n$ cd pqdwdtm\r\n$ ls\r\n203078 cwtdqrn\r\n169712 fwdvgnqp.fsm\r\n106227 jqnl.hzj\r\n66550 zvmf\r\n$ cd ..\r\n$ cd ..\r\n$ cd lvws\r\n$ ls\r\n210229 tcc.ngf\r\n$ cd ..\r\n$ cd zlpmfh\r\n$ ls\r\ndir vdtv\r\n$ cd vdtv\r\n$ ls\r\ndir fdrv\r\n$ cd fdrv\r\n$ ls\r\n40808 fmfnpm.ssj\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd zvb\r\n$ ls\r\ndir cnsddwlg\r\ndir csdz\r\n$ cd cnsddwlg\r\n$ ls\r\n232 jqnl.hzj\r\ndir tcjhhh\r\n$ cd tcjhhh\r\n$ ls\r\n225195 flm.hmb\r\n227170 vvdqw.hwn\r\n$ cd ..\r\n$ cd ..\r\n$ cd csdz\r\n$ ls\r\ndir qzgsswr\r\n$ cd qzgsswr\r\n$ ls\r\n250314 fzb.jhc\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd nsphznf\r\n$ ls\r\n277038 vns.cpc\r\n162685 wvzlgf.dss\r\ndir zldbdl\r\n$ cd zldbdl\r\n$ ls\r\n263687 jqnl.hzj\r\n137415 qzgsswr\r\n$ cd ..\r\n$ cd ..\r\n$ cd phschqg\r\n$ ls\r\n291670 fwdvgnqp.fsm\r\n163036 rjc.ncl\r\ndir zlpmfh\r\n$ cd zlpmfh\r\n$ ls\r\ndir qzgsswr\r\n37363 szdv.chv\r\n$ cd qzgsswr\r\n$ ls\r\n22625 tzhpl\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd spfwthmd\r\n$ ls\r\n294499 ltfjljcv\r\n$ cd ..\r\n$ cd wchdqb\r\n$ ls\r\n162305 jtf\r\n215603 zlpmfh\r\n$ cd ..\r\n$ cd zlpmfh\r\n$ ls\r\ndir czb\r\ndir hdm\r\ndir jhqqbqb\r\ndir zmj\r\n$ cd czb\r\n$ ls\r\n17922 fmcljr.qvz\r\n263068 fmlr.sgr\r\n$ cd ..\r\n$ cd hdm\r\n$ ls\r\ndir frbhzrg\r\ndir fwdwq\r\n270049 fwdwq.ldt\r\n297608 glbb\r\n252269 gsdccc.hqw\r\n169953 nlhj.hnc\r\n224702 rjc.ncl\r\n$ cd frbhzrg\r\n$ ls\r\n195491 sbjbw.shv\r\n219888 sgfhs\r\n$ cd ..\r\n$ cd fwdwq\r\n$ ls\r\ndir ggc\r\ndir mvqtp\r\ndir rzvtdvvz\r\ndir vjppb\r\n$ cd ggc\r\n$ ls\r\n150629 fwdwq\r\n144726 fwdwq.csr\r\n18186 fwdwq.jwt\r\n$ cd ..\r\n$ cd mvqtp\r\n$ ls\r\ndir dhp\r\n$ cd dhp\r\n$ ls\r\n132445 btm\r\n$ cd ..\r\n$ cd ..\r\n$ cd rzvtdvvz\r\n$ ls\r\n122759 fwdwq.ptd\r\n$ cd ..\r\n$ cd vjppb\r\n$ ls\r\n286152 jrmjsz.rrq\r\ndir qzgsswr\r\n292661 tnh\r\n$ cd qzgsswr\r\n$ ls\r\n205580 pswmmn.psl\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd ..\r\n$ cd jhqqbqb\r\n$ ls\r\ndir mbqc\r\n149539 npgls\r\n156208 nzfphn\r\ndir nzzlwdd\r\n223923 sbjbw.shv\r\n$ cd mbqc\r\n$ ls\r\n11260 lcgnzwcn.pvp\r\n$ cd ..\r\n$ cd nzzlwdd\r\n$ ls\r\n29180 qzgsswr.tcq\r\n232156 zlpmfh.jls\r\n$ cd ..\r\n$ cd ..\r\n$ cd zmj\r\n$ ls\r\n160097 fgt.tfr";

var root = new ElfDirectory(null)
{
    Name = "/"
};

var currentDirectory = root;
currentDirectory = BuildDirectories(input, root, currentDirectory);

int sum = GetDirectorySizesAboveThreshold(100000, root);
int size = GetSizeOfDirectoryToRemove();

Console.Read();

int GetSizeOfDirectoryToRemove()
{
    List<int> directorySizes = new List<int>();

    GetAllDirectorySizes(root, directorySizes);

    int requiredSpace = 30000000;
    int totalSpace = 70000000;

    int spaceToFree = Math.Abs(requiredSpace - (totalSpace - root.DirectorySize));
    var ordered = directorySizes.OrderBy(x => x);

    return ordered.First(x => x >= spaceToFree);
}

int GetDirectorySizesAboveThreshold(int threshold, ElfDirectory root)
{
    int sum = 0;
    if (root.DirectorySize <= threshold)
        sum += root.DirectorySize;

    foreach (var dir in root.Directories)
    {
        sum += GetDirectorySizesAboveThreshold(threshold, dir);
    }

    return sum;
}

void GetAllDirectorySizes(ElfDirectory root, List<int> sizes)
{
    sizes.Add(root.DirectorySize);

    foreach (var directory in root.Directories)
    {
        GetAllDirectorySizes(directory, sizes);
    }
}

ElfDirectory BuildDirectories(string input, ElfDirectory root, ElfDirectory currentDirectory)
{
    foreach (var line in input.Split(Environment.NewLine))
    {
        if (line.StartsWith(InputConstants.ToRoot))
        {
            currentDirectory = root;
        }
        else if (line.StartsWith(InputConstants.UpDirectory))
        {
            currentDirectory = currentDirectory.Parent;
        }
        else if (line.StartsWith(InputConstants.ChangeDirectory))
        {
            var split = line.Split(InputConstants.ChangeDirectory);
            var dirNme = split[1].Trim();

            var found = currentDirectory.Directories.FirstOrDefault(x => x.Name == dirNme);
            if (found != null)
                currentDirectory = found;
        }
        else if (line.StartsWith(InputConstants.Directory))
        {
            var split = line.Split(InputConstants.Directory);
            var dirName = split[1].Trim();

            if (!currentDirectory.Directories.Any(x => x.Name == dirName))
                currentDirectory.Directories.Add(new ElfDirectory(currentDirectory) { Name = dirName });
        }
        else if (line.StartsWith(InputConstants.ListFiles)) { /* Ignore */ }
        else
        {
            var split = line.Split(" ");

            if (!currentDirectory.Files.Any(x => x.Name == split[1]))
            {
                var file = new ElfFile
                {
                    Name = split[1].Trim(),
                    Size = int.Parse(split[0].Trim())
                };
                currentDirectory.Files.Add(file);
            }
        }
    }

    return currentDirectory;
}